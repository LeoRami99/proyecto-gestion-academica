{%extends "base.html"%}
{%block title%}Registro docentes{%endblock%}
{% block navbar %}
<!-- navbar -->
<nav class="navbar navbar-expand-lg sticky-top fondo_navbar" data-aos="fade-down" data-aos-duration="1000">
  <div class="container-fluid">
    <a class="navbar-brand" href="/" style="color:#ffffff;">Nombre del sistema sistema | {{current_user.nombre}}</a>
    <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="#navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <i class="bi bi-list"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#" style="color:#ffffff;">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" style="color:#ffffff;">Features</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" style="color:#ffffff;">Pricing</a>
        </li>
      </ul> -->
  </div>
  <div class="d-flex">
    <!-- <a href="{{url_for('login_page.logout')}}" class="btn btn-outline-light me-2" role="button"
      aria-pressed="true">Cerrar sesión</a> -->
    <button class="btn t" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
      aria-controls="offcanvasExample">
      <i class="bi bi-list" style="font-size: 30px; color: #ffffff;"></i>
    </button>
  </div>
  </div>
</nav>
{% endblock %}
{%block content%}
<!-- Offcanva -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasExampleLabel">Nombre del sistema</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div>
      <div class="d-flex">
        <img src="https://cdn.pixabay.com/photo/2016/11/29/09/41/bag-1868758_960_720.jpg" class="rounded-circle"
          alt="..." height="100px" width="100px">
        <div class="ms-3">
          <h5>{{current_user.nombre}} {{current_user.apellido}}</h5>
          <p>{{nombre_cliente}}</p>
        </div>
      </div>
      <hr>
      <div class="">
        <div class="text-center">
          <a href="{{url_for('login_page.logout')}}" class="btn btn-outline-dark me-2" role="button"
            aria-pressed="true">Cerrar sesión</a>
          <hr>
        </div>
        <div class="accordion accordion-flush" id="accordionFlushExample">
          <div class="accordion-item">
            <h2 class="accordion-header" id="flush-headingOne">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                <i class="bi bi-mortarboard"></i>
                <strong>
                  Cursos
                </strong>
              </button>
            </h2>
            <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne"
              data-bs-parent="#accordionFlushExample">
              <!-- Lista de botonos -->
              <div class="accordion-body">
                <div class="btn-group-vertical w-100 g-3" role="group" aria-label="Vertical button group">
                  <a type="button" class="btn btn-dark">Cursos activos</a>
                  <a type="button" class="btn btn-dark">cursos no activos</a>
                  <a type="button" class="btn btn-dark">Registrar curso</a>
                </div>
              </div>

            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="flush-headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                Accordion Item #2
              </button>
            </h2>
            <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo"
              data-bs-parent="#accordionFlushExample">
              <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the
                <code>.accordion-flush</code> class. This is the second item's accordion body. Let's imagine this being
                filled with some actual content.</div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="flush-headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                Accordion Item #3
              </button>
            </h2>
            <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree"
              data-bs-parent="#accordionFlushExample">
              <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the
                <code>.accordion-flush</code> class. This is the third item's accordion body. Nothing more exciting
                happening here in terms of content, but just filling up the space to make it look, at least at first
                glance, a bit more representative of how this would look in a real-world application.</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- fin del offcanva -->

<!-- titulo -->
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="text-center mt-5" data-aos="fade-down" data-aos-duration="1000">Registrar docente</h1>
    </div>
  </div>
  <!-- Formulario con 10 inputs organizados horizontalmente y verticalmente -->
  <div class="row" data-aos="fade-up" data-aos-duration="1000">
    <div class="col-12">
      <form action="{{url_for('docentes.registrar')}}" method="POST" class="m-5 bg-light p-5 rounded border shadow">
        <div class="row">
          <div class="col-12">
            <div class="row">
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="nombre_usuario" class="form-label">Nombre de usuario</label>
                  <input type="text" class="form-control p-2" id="nombre_usuario" name="nombre_usuario"
                    placeholder="Nombre de usuario" required>
                </div>
              </div>
              <!-- <div id="nombre_usuario_resultado"></div> -->
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="nombres" class="form-label">Nombres</label>
                  <input type="text" class="form-control p-2" id="nombres" name="nombres"
                    placeholder="Nombres" required>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="apellidos" class="form-label">Apellidos</label>
                  <input type="text" class="form-control p-2" id="apellidos" name="apellidos"
                    placeholder="Apellidos" required>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="correo" class="form-label">Correo</label>
                  <input type="email" class="form-control p-2" id="correo" name="correo"
                    placeholder="Correo" required>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="Contraseña" class="form-label">Contraseña</label>
                  <input type="password" class="form-control p-2" id="password" name="password"
                    placeholder="Contraseña" required>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="numero_cel" class="form-label">Número de celular</label>
                  <input type="number" class="form-control p-2" id="numero_cel" name="numero_cel"
                    placeholder="Número de celular" required>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="numero_tel_fijo" class="form-label">Número de teléfono fijo</label>
                  <input type="number" class="form-control p-2" id="numero_tel_fijo" name="numero_tel_fijo"
                    placeholder="Número de teléfono fijo" required>
                </div>
              </div>
              <!-- <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3"> -->
                  <!-- <label for="rol" class="form-label">Número de teléfono fijo</label> -->
                  <input type="hidden" class="form-control p-2" id="rol" name="rol" value="DOC">
                <!-- </div>
              </div> -->
              <!-- <div class="col-12 col-md-6 col-lg-4"> -->
                <!-- <div class="mb-3"> -->
                  <!-- <label for="rol" class="form-label">Número de teléfono fijo</label> -->
                  <input type="hidden" class="form-control p-2" id="estado" name="estado" value="1">
                <!-- </div> -->
              <!-- </div> -->
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="tipo_doc" class="form-label">Tipo de documento</label>
                  <select name="tipo_doc" id="" class="form-control">
                    <option value="CC">Cédula de ciudadanía</option>
                    <option value="CE">Cédula de extranjería</option>
                    <option value="RC">Registro civil</option>
                    <option value="PA">Pasaporte</option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="num_doc" class="form-label">Número de documento</label>
                  <input type="number" class="form-control p-2" id="num_doc" name="num_doc" placeholder="Número de documento" required>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <label for="profesion" class="form-label">Profesión</label>
                  <input type="text" class="form-control p-2" id="profesion" name="profesion" placeholder="Profesión" required>
                </div>
              </div>

              <div class="col-12 col-md-6 col-lg-4">
                <div class="mb-3">
                  <!-- <label for="nombre" class="form-label">Nombre</label> -->
                  <input type="hidden" class="form-control p-2" id="id_cliente" name="id_cliente"
                    value="{{current_user.id_cliente}}">
                </div>
              </div>
              <!-- Boton de enviar -->
              <div class="col-12 mb-3 text-center">
                <button type="submit" class="btn btn-card p-2 w-25">Enviar</button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>




<!-- Función que verifica si existe el nombre de usuario y colocar con css rojo si ya existe y verde si no existe -->
<script>
  $(document).ready(function () {
    $('#nombre_usuario').keyup(function () {
      var nombre_usuario = $(this).val();
      if (nombre_usuario != '') {
        $.ajax({
          url: "{{url_for('docentes.consultar_usuario')}}",
          method: "POST",
          data: {
            nombre_usuario: nombre_usuario
          },
          success: function (data) {
            if (data == 'Este nombre de usuario ya existe') {
              $('#nombre_usuario').css("border-color", "#F90A0A");
              // Añadir el mensaje de error
              $('#nombre_usuario').after('<span class="text-danger">' + data + '</span>');

            } else {
              $('#nombre_usuario').css("border-color", "#34F458");
              // Eliminar el mensaje de error
              $('.text-danger').remove();
            }
          }
        });
      }
    });
  });
</script>



{%endblock%}
{%block footer%}

<!-- footer -->
<footer class="text-center text-white fondo_navbar" data-aos="fade-up" data-aos-duration="1000">
  <!-- Grid container -->
  <div class="container pt-4">
    <!-- Section: Social media -->
    <section class="mb-4">
      <!-- Facebook -->
      <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button" data-mdb-ripple-color="dark">
        <i class="bi bi-facebook-f"></i></a>

      <!-- Twitter -->
      <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button" data-mdb-ripple-color="dark"><i
          class="bi bi-twitter"></i></a>

      <!-- Google -->
      <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button" data-mdb-ripple-color="dark"><i
          class="bi bi-google"></i></a>

      <!-- Instagram -->
      <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button" data-mdb-ripple-color="dark"><i
          class="bi bi-instagram"></i></a>

      <!-- Linkedin -->
      <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button" data-mdb-ripple-color="dark"><i
          class="bi bi-linkedin"></i></a>
      <!-- Github -->
      <a class="btn btn-link btn-floating btn-lg text-dark m-1" href="#!" role="button" data-mdb-ripple-color="dark"><i
          class="bi bi-github"></i></a>
    </section>
    <!-- Section: Social media -->
  </div>
  <!-- Grid container -->

  <!-- Copyright -->
  <div class="text-center text-dark p-3" style="background-color: rgba(0, 0, 0, 0.2);">
    © 2020 Copyright:
    <a class="text-dark" href="https://mdbootstrap.com/">MDBootstrap.com</a>
  </div>
  <!-- Copyright -->
</footer>
{%endblock%}